# EpisodicMemory Configuration Example
# Complete configuration reference
#
# Copy this file to .env and update with your values
# DO NOT commit .env to version control

# ============================================================================
# SERVICE CONFIGURATION
# ============================================================================
SERVICE_HOST=0.0.0.0
SERVICE_PORT=8000
SERVICE_WORKERS=4
SERVICE_LOG_LEVEL=INFO
SERVICE_RELOAD=false
SERVICE_SCREENSHOT_STORAGE_PATH=./data/screenshots
SERVICE_ARCHIVE_STORAGE_PATH=./data/archive

# ============================================================================
# LOGGING CONFIGURATION 
# ============================================================================
LOGGING_LEVEL=INFO
LOGGING_JSON_OUTPUT=true
LOGGING_COLORIZED=false
LOGGING_SLOW_REQUEST_WARNING_MS=100.0
LOGGING_SLOW_REQUEST_ERROR_MS=500.0
LOGGING_SERVICE_NAME=episodic-memory
LOGGING_SERVICE_VERSION=0.1.0
LOGGING_ENVIRONMENT=development

# ============================================================================
# KYRODB CONFIGURATION
# ============================================================================
KYRODB_TEXT_HOST=localhost
KYRODB_TEXT_PORT=50051
KYRODB_IMAGE_HOST=localhost
KYRODB_IMAGE_PORT=50052
KYRODB_MAX_WORKERS=10
KYRODB_CONNECTION_TIMEOUT_SECONDS=30
KYRODB_REQUEST_TIMEOUT_SECONDS=60
KYRODB_ENABLE_TLS=false
KYRODB_TLS_VERIFY_SERVER=true

# ============================================================================
# EMBEDDING CONFIGURATION
# ============================================================================
EMBEDDING_TEXT_MODEL_NAME=all-MiniLM-L6-v2
EMBEDDING_TEXT_DIMENSION=384
EMBEDDING_TEXT_BATCH_SIZE=32
EMBEDDING_IMAGE_MODEL_NAME=openai/clip-vit-base-patch32
EMBEDDING_IMAGE_DIMENSION=512
EMBEDDING_IMAGE_BATCH_SIZE=16
EMBEDDING_DEVICE=cpu

# ============================================================================
# LLM CONFIGURATION (OpenRouter - unified API gateway)
# ============================================================================
# OpenRouter provides unified access to multiple LLM providers via OpenAI-compatible API.
# Get your API key at: https://openrouter.ai/keys
LLM_OPENROUTER_API_KEY=sk-or-your-openrouter-api-key-here
LLM_OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Consensus models (2 models for multi-perspective reflection)
LLM_CONSENSUS_MODEL_1=kwaipilot/kat-coder-pro:free
LLM_CONSENSUS_MODEL_2=tngtech/deepseek-r1t2-chimera:free
# Cheap tier model (single model for cost-effective reflections)
LLM_CHEAP_MODEL=x-ai/grok-4.1-fast:free
# LLM parameters
LLM_MAX_TOKENS=2000
LLM_TEMPERATURE=0.3
LLM_TIMEOUT_SECONDS=30
LLM_MAX_RETRIES=3
LLM_MAX_COST_PER_REFLECTION_USD=1.0


# ============================================================================
# REFLECTION CONFIGURATION 
# ============================================================================
REFLECTION_DEFAULT_TIER=auto
REFLECTION_MIN_CHEAP_CONFIDENCE=0.6
REFLECTION_MIN_PRECONDITIONS=1
REFLECTION_MAX_COST_PER_DAY_USD=50
REFLECTION_MAX_PREMIUM_PERCENTAGE=0.15
REFLECTION_ENABLE_QUALITY_FALLBACK=true
REFLECTION_ENABLE_COST_TRACKING=true

# ============================================================================
# SEARCH CONFIGURATION
# ============================================================================
SEARCH_DEFAULT_K=20
SEARCH_MAX_K=100
SEARCH_PRECONDITION_THRESHOLD=0.5
SEARCH_SIMILARITY_THRESHOLD=0.6
SEARCH_FETCH_MULTIPLIER=5

# ============================================================================
# CORS CONFIGURATION 
# ============================================================================
CORS_ALLOWED_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_MAX_AGE=600

# ============================================================================
# DATABASE CONFIGURATION 
# ============================================================================
DATABASE_URL=sqlite:///./data/customers.db

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
API_KEY_BCRYPT_ROUNDS=12
API_KEY_CACHE_TTL=300

# Admin API key for protecting /admin/* endpoints
# If not set, admin endpoints are unprotected (warning logged)
# Recommended: Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# ============================================================================
# RATE LIMITING 
# ============================================================================
RATE_LIMIT_CAPTURE=100/minute
RATE_LIMIT_SEARCH=200/minute

# ============================================================================
# OBSERVABILITY
# ============================================================================
PROMETHEUS_METRICS_ENABLED=true
HEALTH_CHECK_CACHE_TTL=5

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
UVICORN_WORKERS=4
UVICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
UVICORN_KEEP_ALIVE=5
UVICORN_MAX_REQUESTS=10000
UVICORN_MAX_REQUESTS_JITTER=1000
UVICORN_TIMEOUT=60

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================
DEBUG=false
RELOAD=false
